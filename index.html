<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
"http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<meta charset="UTF-8">

<html xmlns="http://www.w3.org/1999/xhtml">
<head>
	<link rel="stylesheet" type="text/css" href="style.css"/>
	<link href='https://fonts.googleapis.com/css?family=PT+Sans' rel='stylesheet' type='text/css'>

	<script type="text/javascript" src="https://code.jquery.com/jquery-1.11.1.min.js"></script>
	<script type="text/javascript" src="jquery.facedetection.min.js"></script>
	<script type="text/javascript" src="underscore-min.js"></script>
	<script type="text/javascript" src="rhill-voronoi-core.min.js"></script>
	<script type="text/javascript" src="FileSaver.min.js"></script>
	<script type="text/javascript" src="clip.js"></script>
	<script type="text/javascript" src="init.js"></script>
</head>
<body>
	<div id="content">
		<div id="settings">
			<h2>Usage</h2>
			<p>
			This is a tool to help you tag faces in a photo and and automatically define image regions to be used to associate with names, e.g. to display them when hovering over.
			</p>
			<ol>
				<li>
					Choose an image.
					<p>
						<input id="loadimage" type="file"/>
					</p>
				<li>
					Press to reset and detect faces automatically. <strong>WARNING:</strong>
					This might take some time. <br/>
					<input id="detectfaces" disabled="disabled" type="button" value="Detect Faces"/>
				</li>
				<li>
					Click to add a new point or Ctrl+Click (Cmd+Click) to remove the closest point.</li>
				<li>
					You can toggle at any time to a print mode which displays numbers. <br/>
					<p><input id="printview" disabled="disabled" type="button" value="print view"/></p>
				</li>
				<li>At this point, save your progress! Use Right click &gt; Save Image to save the print overlay of your original image and use this button to export the positions of the faces to a json file.<input id="savefile" type="button" value="Save as JSON"/>
				<p>
					Afterwards you can <em>Import</em> saved face positions again.
					<input id="loadfile" type="file" accept="application/json" />
				</p>
				</li>
				<li>
					Produce a list of names. Maybe use crowdsourcing (e.g. Google Drive).
					It has to be a JSON <em>array</em> of objects of the form <pre>{"id": "42", "first": "Oliver", "last": "Vornberger"}</pre>
					If you did use Google Drive, you can use the provided vim commands <tt>convert_names.vim</tt> to convert a CSV file to the required JSON format. Just say <tt>:source convert_names.vim</tt>.
				</li>
				<li>
					Now load the <em>correctly formatted </em> JSON name list here:
					<p>
						<input id="loadnames" type="file" accept="application/json"/>
						<div id="namesHelp" class="help"></div>
					</p>
				</li>
				<li>
					(Optional) Define a clipping polygon.
				</li>
				<li>You're done! Now click the button below to export the finished page.</li>
			</ol>
			<div class="divider"></div>
			<p>
				<input id="savehtml" type="button" value="Export the finished HTML page"/>
			</p>
			<p>
				<input id="boundaryButton" type="button" value="edit boundary"/>
				<input id="boundaryResetButton" type="button" value="reset boundary"/>
				<div id="boundaryHelp" class="help info"></div>
			</p>
		</div>
		<canvas id="canvas" width="800" height="600"></canvas>
	</div>
	<img id="picture" src="test.jpg" />
</body>
</html>
